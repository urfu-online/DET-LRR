{% extends "base.html" %}
{% load crispy_forms_tags bootstrap_icons %}
{% load static %}
{% block content %}
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb px-3 pb-0">
      <li class="breadcrumb-item"><a href="/">{% md_icon "bank-outline" %}</a></li>
      <li class="breadcrumb-item"><a href="/">Каталог ЭОР</a></li>
      <li class="breadcrumb-item"><a
        href="{% url 'repository:repository_DigitalResource_detail' pk=object.pk %}">Паспорт
        ЭОР {{ object.title }}</a></li>
      <li class="breadcrumb-item active" aria-current="page">Редактирование паспорта ЭОР</li>
    </ol>
  </nav>
  <header><h1 class="display-3">Редактирование паспорта ЭОР </h1></header>

  <div class="row p-2">
    <div class="col-12 p-2">
      <form class="" method="post">
        <div class="card h-100 shadow-3">
          <div class="card-body">
            {% csrf_token %}
            {{ form.errors }}
            {{ form.non_field_errors }}
            {{ form.media.css }}
            <div class="form-row">
              <label>{{ form.title.label }}</label>
              {{ form.title }}
            </div>
            <div class="form-row">
              <label>{{ form.type.label }}</label>
              {{ form.type }}
            </div>
            <div class="form-group">
              <label>{{ form.authors.label }}</label>
              {{ form.authors }}
            </div>
            <div class="form-group">
              <label>{{ form.description.label }}</label>
              {{ form.description }}
            </div>
            <div class="form-row">
              <label>{{ form.keywords.label }}</label>
              {{ form.keywords }}
            </div>
            <div class="form-row">
              <label>{{ form.competences.label }}</label>
              {{ form.competences }}
            </div>
            <div class="form-row">
              <label>{{ form.result_edu.label }}</label>
              {{ form.result_edu }}
            </div>
            <div class="form-row">
              <label>{{ form.subjects_tags.label }}</label>
              {{ form.subjects_tags }}
            </div>
            <div class="form-row">
              <label>{{ form.edu_programs_tags.label }}</label>
              {{ form.edu_programs_tags }}
            </div>
            <div class="form-row">
              <label>{{ form.language.label }}</label>
              {{ form.language }}
            </div>

            <div class="form-row">
              <label>{{ form.copyright_holder.label }}</label>
              {{ form.copyright_holder }}
            </div>
            <div class="form-row">
              <label>{{ form.platform.label }}</label>
              {{ form.platform }}
            </div>


          </div>
        </div>
        <br/>
        <div class="card h-100 shadow-3">
          <div class="card-body">
            <h4>Компоненты ЭОР</h4>

            {{ source_formset.management_form }}
            {% for source in source_formset.forms %}
              {% for hidden in source.hidden_fields %}
                {{ hidden }}
              {% endfor %}

              <div class="card source_form shadow-3 mb-3">
                <div class="card-body">
                  <div class="form-group">
                    <label>{{ source.type.label }}</label>
                    {{ source.type }}
                  </div>
                  <div class="form-group">
                    <label>{{ source.link_name.label }}</label>
                    {{ source.link_name }}
                  </div>
                  <div class="form-group" id="id_source_set-0-file_1">
                    <label>{{ source.file.label }}</label>
                    {{ source.file }}
                  </div>
                  <div class="form-group" id="id_source_set-0-URL_1">
                    <label> {{ source.URL.label }}</label>
                    {{ source.URL }}
                  </div>

                  {#                <div class="field">#}
                  {#                  {{ source }}#}
                  {#                </div>#}
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
        <br/>
        <button class="btn btn-primary" type="submit">Сохранить</button>


      </form>
    </div>
  </div>
  {{ form.media.js }}
  </div>
  <script>
    function singleSelectChangeValue() {
      //Getting Value

      // METHOD 1
      var selValue = document.getElementById("id_source_set-0-type").value;
      var file = document.getElementById("id_source_set-0-file_1");
      var URL = document.getElementById("id_source_set-0-URL_1");
      if (selValue === "URL") {
        file.style.display = 'none';
        URL.style.display = 'block';
        URL.getElementsByTagName("input")[0].required = true;
      } else if (selValue === 'FILE') {
        URL.style.display = 'none';
        file.style.display = 'block';
        file.getElementsByTagName("input")[0].required = true;
      } else if (selValue === "") {
        URL.style.display = 'block';
        file.style.display = 'block';
      }
    }

    window.onload = function () {
      singleSelectChangeValue()
    };
    window.onchange = function () {
      singleSelectChangeValue()
    };
  </script>
{% endblock %}
