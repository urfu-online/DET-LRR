{% extends "base.html" %}
{% load crispy_forms_tags bootstrap_icons user_tags %}
{% load static %}
{% block content %}

  <nav aria-label="breadcrumb">
    <ol class="breadcrumb px-3 pb-0">
      <li class="breadcrumb-item"><a href="/">{% md_icon "bank-outline" %}</a></li>
      <li class="breadcrumb-item"><a href="{% url 'complexes:complexes_DigitalComplexMy_list' %}">Мои
        ЭУМК</a></li>
      <li class="breadcrumb-item"><a
        href="{% url 'complexes:complexes_DigitalComplex_detail' pk=dig_complex.pk %}">{{ dig_complex }}</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">Редактирование компонентов ЭУМК</li>
    </ol>
  </nav>
  <header><h1 class="display-3">Редактирование компонентов ЭУМК</h1>
    <h4>
      По дисциплине(ам)
      {% for subject in dig_complex.subjects.all %}
        {{ subject }}
      {% endfor %}
      образовательной программы
      {% for direction in dig_complex.directions.all %}
        {{ direction }}
      {% endfor %}
    </h4>
  </header>
  <div class="row p-2">
    <div class="col-12 p-2">
      <div class="card h-100 border-secondary shadow-2">
        <div class="card-body">
          <table class="table table-striped table-bordered">
            <thead>
            <h5>Компоненты</h5>
            <tr>
              <th>#</th>
              <th>Ресурс/Среда/Занятие/Источник</th>
              <th>Как используется при изучении дисциплины</th>
            </tr>
            </thead>
            <tbody>
            {% for component in object_list %}
              <tr>
                <td>{{ component.order }}</td>
                <td>
                  {% if component.polymorphic_ctype|cut:" " == "complexes|КомпонентЭОР" %}
                    <b>Электронный учебный курс</b> <br> {{ component }}
                  {% elif component.polymorphic_ctype|cut:" " == "complexes|Средаобучения" %}
                    <b>Среда обучения</b> <br> {{ component }}
                  {% elif component.polymorphic_ctype|cut:" " == "complexes|Литературныйисточник" %}
                    <b>Литературный источник ЭБС</b> <br> {{ component }}
                  {% else %}
                    <b>Синхронное занятие</b> <br> {{ component }}
                  {% endif %}
                </td>
                <td>{{ component.description }}</td>
                <td>
                  {% if component.polymorphic_ctype|cut:" " == "complexes|КомпонентЭОР" %}
                    <a class="btn btn-outline-primary mx-1"
                       href="{% url 'complexes:complexes_ResourceComponent_update' pk=component.pk %}"><i
                      class="pen icon"></i></a>
                  {% elif component.polymorphic_ctype|cut:" " == "complexes|Средаобучения" %}
                    <a class="btn btn-outline-primary mx-1"
                       href="{% url 'complexes:complexes_PlatformComponent_update' pk=component.pk %}"><i
                      class="pen icon"></i></a>
                  {% elif component.polymorphic_ctype|cut:" " == "complexes|Литературныйисточник" %}
                    <a class="btn btn-outline-primary mx-1"
                       href="{% url 'complexes:complexes_LiterarySourcesComponent_update' pk=component.pk %}"><i
                      class="pen icon"></i></a>
                  {% elif component.polymorphic_ctype|cut:" " == "complexes|Синхронноезанятие" %}
                    <a class="btn btn-outline-primary mx-1"
                       href="{% url 'complexes:complexes_TraditionalSessionComponent_update' pk=component.pk %}"><i
                      class="pen icon"></i></a>
                  {% endif %}

                  {#                  {% if request.user|has_owner_complex:object or request.user.is_superuser %}#}
                  {#                  TODO: Check permissions#}
                  <a class="btn btn-outline-primary" href="{% url 'complexes:complexes_ResourceComponent_update' pk=component.pk %}">{% md_icon "pencil-outline" %} Редактировать</a>
                  {#    {% endif %}#}

                  <a class="btn btn-outline-primary "
                     href="{% url 'complexes:complexes_ComplexParentComponent_delete' pk=component.pk %}"><i
                    class="fas fa-trash-alt"></i></a></td>
              </tr>
            {% endfor %}
            </tbody>
          </table>

          {% include "includes/paginator.html" %}

          <div class="card d-flex flex-row my-3 float-right">
            <a class="btn btn-outline-primary mx-1"
               href="{% url 'complexes:complexes_ResourceComponent_create' pk=dig_complex.pk %}"><i
              class="fas fa-plus"></i> ЭОР</a>
            <a class="btn btn-outline-primary mx-1"
               href="{% url 'complexes:complexes_ResourceBookmarkComponent_create' pk=dig_complex.pk %}"><i
              class="fas fa-plus"></i> Избранные ЭОР</a>
            <a class="btn btn-outline-primary mx-1"
               href="{% url 'complexes:complexes_PlatformComponent_create' pk=dig_complex.pk %}"><i
              class="fas fa-plus"></i> Среда обучения</a>
            <a class="btn btn-outline-primary mx-1"
               href="{% url 'complexes:complexes_TraditionalSessionComponent_create' pk=dig_complex.pk %}"><i
              class="fas fa-plus"></i> Синхронные занятия</a>
            <a class="btn btn-outline-primary mx-1"
               href="{% url 'complexes:complexes_LiterarySourcesComponent_create' pk=dig_complex.pk %}"><i
              class="fas fa-plus"></i> Литературные источники</a>
          </div>
          <div class="card-footer">
            <a class="btn btn-primary" href="{% url 'complexes:complexes_DigitalComplex_detail' pk=dig_complex.pk %}">Вернуться
              назад</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  </form>
  </div>
{% endblock %}
